<!--
	View for displaying a queue.
-->
<h3 data-bind="text: queue.name"></h3>

<ul class="nav nav-tabs">
	<li data-bind="css: {active: !merged()}">
		<a data-bind="attr: {href: '#/queue/' + queue._id() + '/unmerged'}">Unmerged</a>
	</li>
	<li data-bind="css: {active: merged()}">
		<a data-bind="attr: {href: '#/queue/' + queue._id() + '/merged'}">Merged</a>
	</li>
</ul>

<div class="tab-content">

	<div class="tab-pane" data-bind="css: {active: !merged()}, with: queue">
	
		<div data-bind="if: unmergedStories().length">
			<table class="table table-striped">
				<thead>
					<tr>
						<th style="width: 20%">Reference</th>
						<th style="width: 60%">Title</th>
						<th style="width: 20%">Author</th>
						<th></th>
						<th></th>
						<th></th>
					</tr>
				</thead>
				<tbody data-bind="foreach: unmergedStories">
					<tr data-bind="css: {merged: merged}">
						<td data-bind="text: reference"></td>
						<td data-bind="text: title"></td>
						<td data-bind="text: author"></td>
						<td>
							<a data-bind="ifnot: merged(), attr: {href: '#/queue/' + $parent._id() + '/story/' + _id() + '/merge'}, click: $parents[1].merge" title="Merge Story">
								<i class="icon-ok"></i>
							</a>
							<a data-bind="if: merged(), attr: {href: '#/queue/' + $parent._id() + '/story/' + _id() + '/unmerge'}, click: $parents[1].unmerge" title="Unmerge Story">
								<i class="icon-ok"></i>
							</a>
						</td>
						<td>
							<a data-bind="attr: {href: '#/queue/' + $parent._id() + '/story/' + _id() + '/update'}" title="Edit Story">
								<i class="icon-pencil"></i>
							</a>
						</td>
						<td>
							<a data-bind="attr: {href: '#/queue/' + $parent._id() + '/story/' + _id() + '/delete'}" title="Delete Story">
								<i class="icon-remove"></i>
							</a>
						</td>
					</tr>
				</tbody>
			</table>
			
		</div>
		
		<div data-bind="ifnot: unmergedStories().length">
			<p>This queue has no unmerged stories.  Would you like to create one?</p>
		</div>
	
		<a class="btn btn-primary" data-bind="attr: {href: '#/queue/' + _id() + '/stories/create'}">
			<i class="icon-plus icon-white"></i> New Story
		</a>

	</div>
	
	<div class="tab-pane" data-bind="css: {active: merged()}, with: queue">
	
		<div data-bind="if: mergedStories().length">
			<table class="table table-striped">
				<thead>
					<tr>
						<th style="width: 20%">Reference</th>
						<th style="width: 60%">Title</th>
						<th style="width: 20%">Author</th>
						<th></th>
						<th></th>
						<th></th>
					</tr>
				</thead>
				<tbody data-bind="foreach: mergedStories">
					<tr data-bind="css: {merged: merged}">
						<td data-bind="text: reference"></td>
						<td data-bind="text: title"></td>
						<td data-bind="text: author"></td>
						<td>
							<a data-bind="ifnot: merged(), attr: {href: '#/queue/' + $parent._id() + '/story/' + _id() + '/merge'}, click: $parents[1].merge" title="Merge Story">
								<i class="icon-ok"></i>
							</a>
							<a data-bind="if: merged(), attr: {href: '#/queue/' + $parent._id() + '/story/' + _id() + '/unmerge'}, click: $parents[1].unmerge" title="Unmerge Story">
								<i class="icon-ok"></i>
							</a>
						</td>
						<td>
							<a data-bind="attr: {href: '#/queue/' + $parent._id() + '/story/' + _id() + '/update'}" title="Edit Story">
								<i class="icon-pencil"></i>
							</a>
						</td>
						<td>
							<a data-bind="attr: {href: '#/queue/' + $parent._id() + '/story/' + _id() + '/delete'}" title="Delete Story">
								<i class="icon-remove"></i>
							</a>
						</td>
					</tr>
				</tbody>
			</table>
			
		</div>
		
		<div data-bind="ifnot: mergedStories().length">
			<p>This queue has no merged stories.</p>
		</div>
	
	</div>
	
</div>
